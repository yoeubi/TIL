# 9.2 Sass

Sass 는 Syntactically awesome style sheets의 약어로 매우 멋진 스타일시트를 의미합니다.

Sass로는 CSS에서 사용할 수 있는 문법을 확장하여 중복되는 코드를 줄여 더욱 보기 좋게 작성할 수 있습니다.

# 9.2.1 프로젝트에 Sass 적용

리액트 프로젝트에 Sass를 적용하려면 node-sass를 설치해야합니다.

```bash
yarn add node-sass
```

sass-loader는 webpack에서 Sass 파일을 읽어오고 node-sass는 Sass로 작성된 코드들을 CSS로 변환합니다.

# 9.2.2 Sass 사용

# 9.2.2.1 현재 선택자 참조

특정 클래스에 마우스를 올리 때나 클릭할때 다른 스타일을 적용하려면 다음과 같이 CSS 코드를 작성해야합니다.

```css
.box:hover {
    background : red;
}
.box:active {
    background : yellow;
}
```

같은 내용을 Sass의 현재 선택자 참조 기능으로 작성할 수 있습니다. & 문자를 사용하여 다음과 같이 작성합니다.

```css
.box {
    &:hover {
        background : red;
    }
    &:active {
        background: yellow;
    }
}
```

이런 식으로 감싸인 구조로 CSS를 작성할 수 있기 때문에 가독성이 훨씬 높습니다.

# 9.2.2.2 감싸인 구조

Sass를 사용하면 감싸인 구조로 코드를 보기 좋게 입력할 수 있습니다. 코드를 감싸서 입력하면 DOM 트리 구조대로 클래스를 작성할 수 있고 특정 클래스가 특정 클래스 내부에 있을때만 적용하기 때문에 가독성과 편리함도 높혀 줍니다.

```js
// src/App.js
 render(){
     const isBlue = true;
     return (
         <div className={cx('box', {blue : isBlue})}>
            <div className={cx('box-inside')}></div>
         </div>
     )
 }
```

box 내부에 box-inside 클래스를 가진 div 요소를 만들었습니다. 이 클래스가 box 내부에 있을 때만 작동하기를 원한다면 CSS로는 다음과 같이 작성합니다.

```css
/* 일반 CSS */
.box .box-inside {

}
/* Sass 방식 */
.box {
    .box-inside {

    }
}
```

```css
/* src/App.module.scss */
.box {
    display : inline-block;
    width : 100px;
    height : 100px;
    border : 1px solid black;
    position : fixed;
    top : 50%;
    left : 50%;
    transform : translate(-50% , -50%);
    &.blue {
        background : blue;
    }
    &:hover {
        background : yellow;
    }
    &:active {
        background : red;
    }
    .box-inside {
        background : black;
        width : 50px;
        height : 50px;
    }
}
```

App 컴포넌트를 읽지 않아도 box-inside 클래스가 box 클래스 내부에 있다는것을 알수 있으니 가독성이 높아졌습니다.

# 9.2.2.3 변수 사용

Sass 에서는 자주 사용하는 값을 변수에 넣을 수 있습니다. 

```css
/* src/App.module.scss */
$size : 100px;
.box {
    display : inline-block;
    width : $size;
    height : $size;
}
```

# 9.2.2.4 믹스인 사용 

자주 사용하는 값은 변수에 넣고, 자주 사용하는 구문은 믹스인으로 다시 이용할 수 있습니다.

```css
/* src/App.module.scss */
$size : 100px;

@mixin place-at-center(){
    top: 50%;
    left : 50%;
    transform : translate(-50% , -50%);
}
.box {
    display : inline-block;
    width : $size;
    height : $size;
    border : 1px solid black;
    posistion : fixed;

    @include place-at-center();
    ...
}
```

# 9.2.3 변수와 믹스인을 전역적으로 사용

변수와 믹스인은 여러 곳에서 재사용하려고 만든 것인데, 현재 CSS Module을 적용한 상태이므로 변수들과 믹스인을 파일마다 공유하지 않습니다.

따라서 이를 전역적으로 사용할 수 있도록 스타일 디렉토리를 만들어 전역적으로 쓰는 코드는 따로 분리하고, 컴포넌트 스타일 파일에서 불러와 사용해 보겠습니다.

src 디렉토리에 styles 디렉토리를 만들고 utils.scss 파일을 만듭니다. 이 파일에 App.module.scss에 있던 $size 와 place-at-center를 잘라서 넣습니다.

```css
/* src/styles/utils.scss */
$size : 100px;

@mixin place-at-center() {
    top: 50%;
    left: 50%;
    transform: translate(-50% , -50%);
}
/* src/App.module.scss */
@import './styles/utils';
```

만약 컴포넌트를 저장하는 디렉토리가 좀 더 깊어지면 파일을 불러올때마다 상위 디렉토리로 들어가야 하므로 이렇게 코드를 작성해야합니다.

```css
@import '../../../styles/utils'; 
```

파일을 기준으로 디렉토리 구조를 작성하면 비효율적이라서 webpack에서 sass-loader를 설정할 때는 includePaths를 설정해서 경로를 간소화할 수 있습니다.

```js
// webpack.config.dev.js
{
    test: sassModuleRegex,
    use: getStyleLoaders(
        {
        importLoaders: 2,
        modules: true,
        getLocalIdent: getCSSModuleLocalIdent,
        },
        'sass-loader'
    ),
},
// 위 부분을 아래로 변경합니다.
{
    test: sassModuleRegex,
    use: getStyleLoaders(
        {
        importLoaders: 2,
        modules: true,
        getLocalIdent: getCSSModuleLocalIdent
        },
        "sass-loader"
    ).concat({
        loader: require.resolve("sass-loader"),
        options: {
        includePaths: [paths.appSrc + "/styles"]
        }
    })
},
```

이제 상대 경루를 생략하고 utils.module.scss를 불러와 사용할 수 있습니다.

```css
/* src/App.module.scss */
@import 'utils.module.scss';
```

# 9.2.4 Sass 라이브러리

Sass 장점 중 하나는 스타일 관련 라이브러리를 쉽게 불어와 사용할 수 있다는 것입니다.

include-media 믹스인 라이브러리와 open-color 변수 세트를 라이브러리를 사용하여 초록색 버튼을 만들겠습니다.

include-media는 반응현 디자인을 도와주며, open-color 라이브러리에는 여러가지 색상이 들어있어 색상을 쉽게 고를 수 있습니다.

```bash
yarn add include-media open-color
```

설치한 후 utils.scss 파일에서 불러와야 합니다.

```css
/* src/styles/uitls.module.scss */
@import '~open-color/open-color';
@import '~include-media/dist/include-media';

$breakpoints : (
    small : 376px,
    medium : 768px,
    large : 1024px,
    huge : 1200px
)

$size : 100px;

@mixin place-at-center() {
    top: 50%;
    left : 50%;
    transform : translate(-50% , -50%);
}
```

npm 또는 yarn 으로 설치한 패키지 내부에 있는 파일을 불러올 때는 ~ 문자를 사용해서 node_modules에 접근할 수 있습니다.

$breakpoints 변수는 추후 반응향 디자인을 위한 코드를 작성할때 기준점으로 사용합니다.

# 9.2.5 버튼 생성

src/components/Button 디렉토리를 만든 다음 Button.js Button.scss index.js 파일을 생성합니다.

```js
// src/components/Button/Button.js
import React , {Component} from 'react';
import styles from './Button.module.scss';
import classNames from 'classnames/bind';

const cx = classNames.bind(styles);

const Button = ({children, ...rest}) => {
    return (
        <div className={cx('button')} {...rest}>
            {children}
        </div>
    )
}
```

props에 children과 ...rest가 있는다 여기서 rest는 나중에 이 컴포넌트가 받을 모든 props를 명시합니다.

비구조화 할당 문법에서 ...foo 형식으로 입력하면 비구조화 할당을 할 때 따로 지정하지 않은 것들은 모두 foo 객체에 담깁니다.

```js
const object = {
    a : 1 ,
    b : 2 ,
    c : 3
};
const {a , ...foo } = object;

console.log(a); // 1
console.log(foo) // {b:2 , c:3}
```

그리고 JSX를 렌더링하는 부분에 {...rest}를 넣으면 이는 객체 안에 있는 모든 값을 해당 DOM/컴포넌트의 props로 지정한다는 의미입니다.

예를 들어 rest 객체 안에 onClick 과 style이 들어 있다면 `<div onClick={onClick} style={style}>` 같은 형식으로 렌더링됩니다.

이렇게 함으로써 컴포넌트에 전달하는 props를 별도 작업없이 그대로 DOM에 전달할 수 있습니다.

```css
/* src/components/Button/Button.scss */
@import 'utils.module.scss';

.button {
    background: $oc-green-7;
    transition: all .2s ease-in;
    display: inline-block;
    padding-top: 2rem;
    padding-bottom: 2rem;
    text-align: center;
    color: white;
    position: fixed;
    font-size: 2rem;
    font-weight: 500;
    border-radius: 4px;
    cursor: pointer;

    @include place-at-center();

    width: 1200px;

    @include media("<huge") {
        width: 1024px;
    }
    @include media("<large") {
        width: 768px;
    }
    @include media("<medium") {
        width: 90%;
    }
    
    &:hover {
        background: $oc-green-6;
    }
    &:active {
        margin-top: 3px;
        background: $oc-green-8;
    }
    
}
```

open-color를 적용하면 변수를 사용하여 여러 가지 색상을 쉽게 적용할 수 있습니다. 변수 형식은 `$oc-[색상이름]-[명암숫자]` 입니다. 예를 들어 초록색은 `$oc-green-6` 형식으로 사용합니다.

include-media는 믹스인으로 구성된 라이브러리입니다. 사용할 때는 이전에 설정한 breakpoints에서 지정한 값들을 참조하여 `@include media('<huge'){}` 형식으로 작성합니다.

이 코드에서는 기본 넓이를 1200px로 설정했고, 창 크기는 1200px 미만이면 1024px, 그것보다 더 작으면 768px로 설정했으며, 페이지의 90% 크기로 설정했습니다.

나중에 컴포넌트 파일을 불러올때 `./components/Button/Button` 형식으로 불어와야합니다. 이것을 깔끔하게 작성할려면 index.js 파일을 만들어 컴포넌트를 불러온 후 바로 내보내면 됩니다.

```js
// src/components/Button/index.js
import Button from './Button';
export default Button;
// 이 코드를 한 줄로 작성하면
export {default} from './Button';
```

```js
// src/App.js
import React , {Component} from 'react';
import Button from './components/Button';

class App extends Component {
    render(){
        return (
            <div>
                <Button>버튼</Button>
            </div>
        )
    }
}
export default App;
```