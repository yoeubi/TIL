# 11.1 문제점 찾기

컴포넌트 리렌더링 최적화를 할 때는 불필요한 리렌더링을 발견하는 것이 중요합니다.

# 11.1.1 리액트 개발자 도구의 Highlight Update

크롬 웹 브라우저에서 리액트 개발자 도구를 연 후 위쪽 HighLight Updates 옵션을 활상화합니다.

이 옵션을 활성화하면 리렌더링될 때마다 화면에 표시가 됩니다.

리렌더링이 일어날 때는 화면에 테두리가 그려지는데 리렌더링 빈도에 따라서 하늘색 -> 초록색 -> 노란색 -> 빨간색 순으로 나타냅니다.

리액트에는 부모 컴포넌트가 리렌더링되면 자식 컴포넌트도 리렌더링되는 속성이 있습니다. 

리액트에서는 Virtual DOM을 사용하여 필요한 DOM만 업데이트한다고 헀는데 왜 최적화를 해야 하는지 헷갈릴 수도 있습니다. 

지금 말하는 불필요한 리렌더링은 실제 웹 브라우저의 페이지에 나타난 DOM의 렌더링이 아니라 Virtual DOM에 하는 렌더링을 의미합니다.

리액트가 어떤 DOM을 변경할지 인지하려면 우선 Virtual DOM에 모두 렌더링해 보아야 합니다. 

이 과정에서 Virtual DOM에 하는 불필요한 리렌더링을 shouldComponentupdate로 방지합니다.

그러면 Virtual DOM에 렌더링하는 과정에서 render 함수를 실행하지 않고, 이전에 썼던 DOM 정보를 그대로 사용하여 자원을 아낄 수 있습니다.

# 11.1.2 데이터 준비

```js
// src/components/App.js
import React , {Component} from 'react';
import pageTemplate from './PageTemplate';
import TodoInput from './TodoInput';
import TodoList from './TodoList';

const initialTodos = new Array(500).fill(0).map(
    (foo,index) => ({id:index , text : `일정 ${index}`, done : false})
);

class App extends Component {
    state = {
        input : '',
        todos : initialTodos,
    }
    ...
}
```

# 11.1.3 크롬 개발자 도구 [Performance] 탭 사용

개발 환경에서 리액트를 사용할 때 크롬 개발자 도구의 Performance탭으로 성능 상태를 시작적으로 확인 할 수 있습니다.

먼저 url 주소 뒷부분에 react_perf를 넣습니다. (예: http://localhost:3000/?react_perf)

페이지를 띄운 후 크롬 개발자 도구를 클릭하여 Performance 탭을 엽니다.

왼쪽 위에 있는 녹화 버튼을 누른 후 인풋 내용에 a를 적습니다. 그다음 다시 녹화버튼을 눌러서 녹화를 중지하세요.

이 작업은 녹화한 시간 동안 크롬에서 처리한 작업들을 시각적으로 정리해서 보여 줍니다.

User Timing 부분을 열어봅니다.

각 컴포넌트에서 처리한 작업들을 확인할 수 있습니다. 마우스 스크롤을 사용하여 원하는 구간을 확대, 축소하여 볼수 있으며 화면 위에서 원하는 구간을 직접 설정할 수도 있습니다.

이 불필요한 리렌더링을 shouldComponentUpdate를 이용하여 방지하도록 하겠습니다.

