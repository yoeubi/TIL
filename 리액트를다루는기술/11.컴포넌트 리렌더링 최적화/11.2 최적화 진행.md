# 11.2 최적화 진행

# 11.2.1 TodoList 컴포넌트 최적화

TodoList 컴포넌트는 todo props를 바꿀 때만 리렌더링되어야 합니다. 따라서 todos 값을 바꿀 때만 컴포넌트에 업데이트 하도록 shouldComponentUpdate 메서드에서 업데이트 조건을 설정합니다.

```js
// src/components/TodoList/TodoList.js
import React , {Component} from 'react';
import TodoItem from '../TodoItem';

class TodoList extends Component {
    shouldComponentUpdate(nextProps, nextState){
        return this.props.todos !== nextProps.todo
    }
}
```

# 11.2.2 TodoItem 컴포넌트 최적화

이번에는 녹화를 시작하고 일정 0을 토글한 후 녹화를 중지합니다.

todos 배열을 실제로 업데이트하는 상황이라 TodoList에서 shouldComponentUpdate가 도움이 되지 않습니다. 

TodoItem에서 최적화를 진행해 주어야 합니다. TodoItem 컴포넌트가 리렌더링되어야 하는 경우는 done 값이 바뀔 때뿐이므로 이에 맞추어 TodoItem의 shouldComponentUpdate 메서드를 만들면 됩니다.

```js
// src/components/TodoItem/TodoItem.js
shouldComponentupdate(nextProps, nextState){
    return this.props.done !== nextProps.done;
}
```

이제 `TodoItem[update]`는 한 번만 나타나고, 나머지 부분에서는 shouldComponentUpdate가 호출되어 업데이트를 방지하여 성능이 개선됩니다.

# 11.3 정리 

불필요한 렌더링을 방지하여 리렌더링 성능을 향상시켜 주었습니다. 다음 세 가지 상황에서 shouldComponentupdate를 구현하면 됩니다.

1. 컴포넌트 배열이 렌더링되는 리스트 컴포넌트일 때
1. 리스트 컴포넌트 내부에 있는 아이템 컴포넌트일 때 
1. 하위 컴포넌트 개수가 많으며, 리렌더링되지 말아야 할 상황에서도 리렌더링이 진행될 때

리스트를 렌더링할때는 언제나 shouldComponentUpdate를 구현해 놓는 것을 습관화합니다.