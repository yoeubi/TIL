일반 HTML에서 DOM 요소에 이름을 달 때는 id를 사용합니다.

```html
<!-- DOM 요소의 id -->
<div id="my-element"></div>
```

특정 DOM 요소에 어떤 작업을 해야 할 때 이렇게 요소를 id를 달면 css에서 특정 id에 특정 스타일을 적용하거나 자바스크립트에서 해당 id를 가진 요소를 찾아서 작업할 수 있다.

```html
<!-- public/index.html -->
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
        <title>React App</title>
    </head>
    <body>
        <div id="root"></div>
    </body>
</html>
```

```js
// src/index.js
...
ReactDOM.render(<App /> , document.getElementById('root'))
```

이렇게 HTML에서 id를 사용하여 DOM에 이름을 다는 것처럼 리액트 프로젝트 내붕에서 DOM에 이름을 다는 방법이 있습니다.

바로 ref(reference의 줄임)개념입니다.

## 리액트 컴포넌트 안에서 id를 사용하면 안되나요?

리액트 컴포넌트 안에서도 id를 사용할 수는 있습니다. JSX 안에서 DOM에 id를 달면 해당 DOM을 렌더링할때 그대로 전달됩니다.

하지만 특수한 경우가 아니면 사용을 권장하지 않습니다. 예를 들어 같은 컴포넌트를 여러 번 사용한다고 가정해 보세요.

HTML에서 DOM의 id는 유일해야하는데 이런 상황에서는 중복 id를 가진 DOM이 여러개 생기는 잘못된 사용입니다.

ref는 전역적으로 작동하지 않고 컴포넌트 내부에서만 작동하기 때문에 이런 문제가 생기지 않습니다.

# 5.1 ref는 어떤 상황에서 사용해야 할까?

특정 DOM에 작업을 해야 할 때 ref를 사용합니다. DOM을 꼭 직접적으로 건드려야 할때 입니다.

예를 들어 일반 순수 자바스크립트 및 jQuery 로 만든 웹 사이트에서 input을 검증할 때는 다음과 같이 특정 id를 가진 input에 클래스를 설정한다.

```html
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Example</title>
        <style>
            .success {
                background-color : green;
            }
            .failure {
                background-color : red;
            }
        </style>
        <script>
            function validate(){
                var input = document.getElementById('password');
                input.className = '';
                if(input.value === '0000'){
                    input.className = 'success';
                } else {
                    input.className = 'failure';
                }
            }
        </script>
    </head>
    <body>
        <input type="password" id="password" />
        <button onclick="validate()">Validate</button>
    </body>
</html>
```

하지만 리액트에서는 이런 작업을 굳이 DOM에 접근하지 않아도 state로 구현할 수 있습니다. 

# 5.1.1 예제 컴포넌트 생성

hello-react/src 디렉토리 안에 ValidationSample.css 와 ValidationSample.js 파일을 만들어 주세요.

```css
/* ValidationSample.css */
.success {
    background-color : green;
}
.failure {
    background-color : red;
}
```

```js
// ValidationSample.js
import React , {Component} from 'react';
import './ValidationSample.css';

class ValidationSample extends Component {
    state = {
        password : '',
        clicked : false ,
        validated : false
    }
    handleChange = (e) => {
        this.setState({
            password : e.target.value
        })
    }
    handleButtonClick = () => {
        this.setState({
            clicked : true,
            validated : this.state.password === '0000'
        })
    }
    render(){
        return (
            <div>
                <input
                    type="password"
                    value={this.state.password}
                    onChange={this.handleChange}
                    className={this.state.clicked ? (this.state.validated ? 'success' : 'failure') : '' }
                />
                <button onClick={this.handleButtonClick}>검증하기</button>
            </div>
        )
    }
}
export default ValidationSample;
```

input에서 onChange 이벤트가 발생하면 handleChange를 호출하여 state의 password 값을 업데이트 하게 했습니다.

button에서는 onClick 이벤트가 발생하면 handleButtonClick을 호출하여 clicked 값을 참으로 설정했고, validated 값을 검증 결과로 설정했습니다.

input의 className 값은 버튼을 누르기 전에는 비어 있는 문자열을 전달하며, 버튼을 누른 후에는 검증 결과에 따라 success 값 또는 failure 값을 설정합니다.

# 5.1.2 App 컴포넌트에서 예제 컴포넌트 렌더링

```js
// App.js
import React , {Component} from 'react';
import ValidationSample from './ValidationSample';

class App extends Component {
    render(){
        return (
            <ValidationSample />
        )
    }
}
export default App;
```

# 5.1.3 DOM을 꼭 사용해야 하는 상황

state만으로 해결할 수 없는 기능이 있습니다.

1. 특정 input에 포커스 주기
1. 스크롤 박스 조작하기
1. Canvas 요소에 그림 그리기 등

이때는 어쩔 수 없이 DOM에 직접적으로 접슨해야 하는데, 바로 ref를 사용합니다.

