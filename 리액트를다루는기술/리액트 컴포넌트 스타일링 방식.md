# 다양한 방식의 리액트 컴포넌트 스타일링 방식 CSS, Sass, CSS Module, styled components

## 가장 흔한 방식 CSS

```js
// App.js
import React , {Component} from 'react';
import logo from './logo.svg';
import './App.css';

class App extends Component {
    render(){
        return (
            <div className="App">
                <header className="App-header">
                    <img src={logo} className="App-logo" alt="logo"/>
                    <p>
                        Edit <code>src/App.js</code> and save to reload
                    </p>
                    <a 
                        className="App-link"
                        href="https://reactjs.org"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        Learn React
                    </a>
                </header>
            </div>
        )
    }
}
export default App;
```

```css
/* App.css */
.App {
    text-align : center;
}
.App-logo {
    animation: App-logo-spin infinite 20s linear;
    height : 40vmin;
}
.App-header {
    background-color : #282c34;
    min-height : 100vh;
    display : flex;
    flex-direction : column;
    align-items : center;
    justify-content: center;
    font-size : calc(10px + 2vmin);
    color : white;
}
.App-link {
    color : #61dafb;
}
@keyframes App-logo-spin {
    from {
        transform : rotate(0deg);
    }
    to {
        transform : rotate(360deg);
    }
}
```

CSS를 작성하게 될 때 가장 중요한 점은 중복되는 클래스명 생성하지 않기 입니다.

클래스명이 중복되는 것을 방지하기 위해 다양한 방식이 있는데 하나는 네이밍이고 하나는 CSS Selector의 활용입니다.

create-react-app 으로 만든 App 컴포넌트를 보면, 클래스명이 `컴포넌트명-클래스` 으로 네이밍이 되어있습니다.

BEM Naming이란 방식도 있는데 컴포넌트마다 CSS 파일을 하나하나 만드는 상황에선 권장되지 않습니다.

다른 방식으로는 CSS Selector를 활용하는 것입니다. 예를 들어 위 CSS를 다음과 같이 변환하면

```css
/* App.css */
.App {
    text-align : center;
}
.App .logo {
    animation: App-logo-spin infinite 20s linear;
    height : 40vmin;
}
.App header {
    background-color : #282c34;
    min-height : 100vh;
    display : flex;
    flex-direction : column;
    align-items : center;
    justify-content: center;
    font-size : calc(10px + 2vmin);
    color : white;
}
.App a {
    color : #61dafb;
}
@keyframes App-logo-spin {
    from {
        transform : rotate(0deg);
    }
    to {
        transform : rotate(360deg);
    }
}
```

```js
// App.js
import React , {Component} from 'react';
import logo from './logo.svg';
import './App.css';

class App extends Component {
    render(){
        return (
            <div className="App">
                <header>
                    <img src={logo} className="logo" alt="logo"/>
                    <p>
                        Edit <code>src/App.js</code> and save to reload
                    </p>
                    <a 
                        href="https://reactjs.org"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        Learn React
                    </a>
                </header>
            </div>
        )
    }
}
export default App;
```

컴포넌트의 최상위 html 요소에는 컴포넌트 이름과 동일한 이름으로 클래스명을 넣고, 그 하단에서는 소문자로 입력하거나 불필요한 경우 생략을 할 수 있습니다.

## Sass 사용하기

Sass는 CSS pre-processor로서 복잡한 작업을 쉽게 할 수 있게 해주고, 코드의 재활용성을 높여줄 뿐 만 아니라, 코드의 가독성을 높여주어 유지보수를 쉽게해줍니다.

이전 버전의 create-react-app 으로 만든 프로젝트에서는 Sass를 사용하기 위하여 별도의 작업을 추가적으로 해야하는데 V2 다음 버전부터는 바로 사용할 수 있습니다.

Sass에서는 두 가지의 확장자 `.scss/.sass` 를 지원합니다. `.sass` 와 `.scss`는 문법이 다릅니다.

```css
/* .sass */
$font-stack : Helvetica , sans-serif
$primary-color : #333

body 
    font : 100% $font-stack
    color : $primary-color
/* .scss */
$font-stack : Helvetica , sans-serif
$primary-color : #333

body {
    font : 100% $font-stack
    color : $primary-color
}
```

보통 scss 문법을 더 많이 사용합니다.

Sass를 사용할라면 node-sass 라는 라이브러리를 설치해야합니다. 이 라이브러리는 Sass를 CSS 로 변환해줍니다.

```
yarn add node-sass
```

src 디렉토리에 SassComponent.scss 파일을 생성하세요

```css
/* SassComponent.scss */

/* 변수 사용하기 */
$red: #fa5252;
$orange: #fd7e14;
$yellow: #fcc419;
$green: #40c057;
$blue: #339af0;
$indigo: #5c7cfa;
$violet: #7950f2;
/* mixin 만들기 (재사용되는 스타일 블록을 함수처럼 사용할 수 있음) */
@mixin square($size) {
    $calculated : 32px * $size;
    width : $calculated;
    height : $calculated;
}

.SassComponent {
    display : flex;
    /* 일반 CSS 에서 .SassComponent .box 와 동일 */
    .box {
        background : red;
        cursor : pointer;
        transition: all 0.3s ease-in;
        /* .red 클래스가 .box 와 함께 사용 됐을 때 .box.red */
        &.red {
            background : $red;
            @include square(1);
        }
        &.orange {
            background: $orange;
            @include square(2);
        }
        &.yellow {
            background: $yellow;
            @include square(3);
        }
        &.green {
            background: $green;
            @include square(4);
        }
        &.blue {
            background: $blue;
            @include square(5);
        }
        &.indigo {
            background: $indigo;
            @include square(6);
        }
        &.violet {
            background: $violet;
            @include square(7);
        }
        &:hover {
            /* .box 에 마우스 올렸을 때 */
            background : black;
        }
    }
}
```

```js
// SassComponent.js
import React from 'react';
import './SassComponent.scss';

const SassComponent = () => {
    return (
        <div className="SassComponent">
            <div className="box red" />
            <div className="box orange" />
            <div className="box yellow" />
            <div className="box green" />
            <div className="box blue" />
            <div className="box indigo" />
            <div className="box violet" />
        </div>
    )
}
export default SassComponent;
// App.js
import React from 'react';
import SassComponent from './SassComponent';

class App extends Component {
    render(){
        return <SassComponent/>
    }
}
export default App;
```

### utils 함수 분리하기

자주 사용 될 수도 있는 Sass 변수 및 믹스인을 따로 파일로 분리하겠습니다.

src 디렉토리 안에 styles 라는 디렉토리를 생성하고, 그안에 utils.scss 파일을 만들어서, 기존의 SassComponent 스타일 코드를 작성했던 변수들과 믹스인을 잘라내서 이동시키겼습니다.

```css
/* src/styles/utils.scss */

/* 변수 사용하기 */
$red: #fa5252;
$orange: #fd7e14;
$yellow: #fcc419;
$green: #40c057;
$blue: #339af0;
$indigo: #5c7cfa;
$violet: #7950f2;
/* mixin 만들기 (재사용되는 스타일 블록을 함수처럼 사용할 수 있음) */
@mixin square($size) {
    $calculated : 32px * $size;
    width : $calculated;
    height : $calculated;
}
```

SassComponent.scss 에서 위 파일에서 선언한 것들을 불러옵니다. 다른 scss 파일을 불러올땐 `@import` 구문을 사용합니다.

```css
/* src/SassComponent.scss */
@import './styles/utils.scss';
.SassComponent {
  display: flex;
  .box {
    background: red; // 일반 CSS 에선 .SassComponent .box 와 마찬가지
    cursor: pointer;
    transition: all 0.3s ease-in;
    &.red {
      // .red 클래스가 .box 와 함께 사용 됐을 때
      background: $red;
      @include square(1);
    }
    &.orange {
      background: $orange;
      @include square(2);
    }
    &.yellow {
      background: $yellow;
      @include square(3);
    }
    &.green {
      background: $green;
      @include square(4);
    }
    &.blue {
      background: $blue;
      @include square(5);
    }
    &.indigo {
      background: $indigo;
      @include square(6);
    }
    &.violet {
      background: $violet;
      @include square(7);
    }
    &:hover {
      // .box 에 마우스 올렸을 때
      background: black;
    }
  }
}
```

### sass-loader 설정 커스터마이징 하기

SassComponent에서 styles/utils.scss를 불러올때 `@import '../styles/utils.scss'`라고 했는데 만약 디렉토리를 깊숙하게 만든다면 `@import '../../../styles/utils.scss'`로 올라가야 하는 단점이 있습니다.

이 문제점은 webpack에서 sass를 처리하는 sass-loader의 설정을 커스터마이징하여 해결할 수 있습니다.

이를 커스터마이징하기 위해서는 yarn eject 명령어를 통하여 세부설정을 다시 밖으로 꺼냅니다.

create-react-app으로 만든 프로젝트는 기본적으로 .git 설정도 되어있는데 yarn eject는 아직 git에 커밋되지 않은 변화가 있다면 진행이 되지 않으니 먼저 커밋을 해줘야 합니다.

yarn eject를 하면 config 경로가 프로젝트 안에 생성이 되는데 그안에 webpack.config.dev.js를 열고 sassRegex를 찾으면

```
{
    test: sassRegex,
    exclude: sassModuleRegex,
    use: getStyleLoaders({ importLoaders: 2 }, 'sass-loader'),
},
```

여기서 use 를 다음과 같이 바꾸면 됩니다.

```
use: getStyleLoaders({ importLoaders: 2 }).concat({
    loader: require.resolve('sass-loader'),
    options: {
        includePaths: [paths.appSrc + '/styles']
    }
})
```

getStyleLoaders 에서 두번째 파라미터로는 문자열 형태밖에 받을수 없어서 위와 같은 형태로 getStyleLoaders로 만든 배열 뒷 부분에다가 우리가  사용할 loader를 options와 함께 적용합니다.

이제 utils.scss 파일을 불러올 때 현재 수정하고 있는 scss 파일 경로가 어디에 위치하더라도 앞 부분에 상대 경로를 입력할 필요 없이 styles 디렉토리 기준 절대 경로로 불러 올수 있습니다.

```css
@import 'utils.scss';
```

하지만 utils.scss 를 모든 scss에 포함시키고 싶다면 sass-loader의 data 설정을 사용하시면 됩니다. data 속성은 Sass 파일을 읽을 때마다 앞 부분에 특정 코드를 포함시켜 줍니다.

```
{
    test: sassRegex,
    exclude: sassModuleRegex,
    use: getStyleLoaders({ importLoaders: 2 }).concat({
    loader: require.resolve('sass-loader'),
    options: {
        includePaths: [paths.appSrc + '/styles'],
        data: `@import 'utils';`
    }
    })
},
```

이렇게 하면 모든 scss 파일에서 utils를 사용할수 있으므로 SassComponent에서 맨 위 import 구문을 지워도 정상저긍로 작동합니다.

만약 이렇게 sass-loader를 커스터마이징 하게 된다면 webpack.config.prod.js 파일에서도 동일하게 적용해야 빌드를 해도 똑같이 작동합니다.

### node_modules 에서 불러오기

yarn 또는 npm을 통하여 설치한 Sass 라이브러리를 불러오는 가장 기본적인 방식으로는 

```css
@import '../../../node_modules/library/styles';
```

이것 보다 더 쉬운 방법은 바로 물결 `~`을 사용하는 것입니다.

```css
@import '~library/styles'; 
```

Sass 라이브러리중에서 반응형 디자인을 쉽게 해주는 include-media와 색상 팔라트인 open-color가 있는데 만약 사용한다면 다음과 같이 쓰면 됩니다.

```
yarn add open-color include-media
```

```css
@import '~include-media/dist/include-media';
@import '~open-color/open-color';
```

패키지 디렉토리 안에 있는 scss 파일을 불러와야 하므로, node_modules 안으로 들어가서 디렉토리를 확인 후 필요한 파일을 불러오면 됩니다.

## CSS Module

CSS Module은 CSS 클래스를 불러와서 사용할때 `[파일이름]_[클래스이름]__[해쉬값]` 형태로 클래스네임을 자동으로 고유한 값으로 만들어주어서 컴포넌트 스타일 중첩현산을 방지해주는 기술입니다.

이를 사용하기 위해선 `[파일이름].module.css` 이런식으로 파일을 저장해야합니다.

```css
/* src/CSSModule.module.css */
/* 자동으로 고유해질 것이므로 흔히 사용하는 단어를 클래스 이름으로 마음대로 사용가능 */
.wrapper {
  background: black;
  padding: 1rem;
  color: white;
  font-size: 2rem;
}

/* 글로벌 CSS 를 작성하고 싶다면 */
:global .something {
  font-weight: 800;
  color: aqua;
}
```

```js
// src/CSSModule.js
import React from 'react';
import styles from './CSSModule.module.css';
const CSSModule = () => {
    return (
        <div className={styles.wrapper}>
            안녕하세요, 저는 <span className="something">CSS Module!</span>
        </div>
    )
} 
export default CSSModule;
```

위 코드처럼 styles를 불러오면 하나의 객체를 전달받게 되는데 그안에서 CSS Module 에서 사용한 클래스 이름과, 해당 이름을 고유화시킨 값이 key-value 형태로 들어있습니다.

console.log(styles)를 하면 

```js
{
  wrapper: "CSSModule_wrapper__CUMkx"
}
```

그리고 이걸 사용하기 위해선 `className={styles.[클래스이름]}` 형태로 설정을 해주면 됩니다.

```js
// src/App.js
import React, {Component} from 'react';
import CSSModule from './CSSModule';

class App extends Component {
    render(){
        return <CSSModule/>
    }
}
export default App;
```

만약 CSS Module을 사용한 클래스 이름을 두 개 이상 적용할때는 다음과 같이 만듭니다.

```css
/* src/CSSModule.module.css */
.wrapper {
  background: black;
  padding: 1rem;
  color: white;
  font-size: 2rem;
}

.inverted {
  color: black;
  background: white;
}

/* 글로벌 CSS 를 작성하고 싶다면 */

:global .something {
  font-weight: 800;
  color: aqua;
}
```

```js
// src/CSSModule.js
import React from 'react';
import styles from './CSSModule.module.css';

const CSSModule = () => {
    return (
        <div className={`${styles.wrapper} ${styles.gray}`}>
            안녕하세요, 저는 <span className="something">CSS Module!</span>
        </div>
    )
}
export default CSSModule;
```

### classNames

classNames는 CSS 클래스를 조건부로 설정할때 매우 유용합니다. 그리고 CSS Module을 사용할 때 이 라이브러리를 함께 사용한다면 여러 클래슬르 적용할때 편해집니다.

```
yarn add classnames
```

classNames의 기본 사용법입니다.

```js
import classNames from 'classnames';

classNames('one','two') // 'one two'
classNames('one',{two:true}) // 'one two'
classNames('one',{two:false}) // 'one'
classNames('one',['two','three']) // 'one two three'

const myClass = 'hello';
classNames('one',myClass, {myCondition: true}) // 'one hello myCondition'
```

이런식으로 여러가지 종류의 파리미터를 조합해 CSS 클래스를 설정 할 수 있으므로 컴포넌트에서 조건부로 클래스를 설정할때 편합니다.

예를 들어 props의 값에 따라 다른 스타일을 주게 하는게 쉬워집니다.

```js
const MyComponent = ({highlighted, theme}) => {
    return <div className={classNames('MyComponent',{highlighted}, theme)}>Hello</div>
}
```

위 엘리먼트의 클래스는 highlighted 값이 true 이나 false에 따라 highlighted 라는 클래스가 적용될 것이고 추가적으로 theme 으로 전달받는 문자열이 그대로 클래스에 적용될 것입니다.

만약 이런 라이브러리의 도움이 없다면 다음 형식으로 처리해야합니다

```js
const MyComponent = ({highlighted,  theme}) => {
    return <div className={`MyComponent ${theme} ${highlignted ? 'highlighted : ''}`}>Hello</di>
}
```

classNames를 불러올 때 `classnames/bind` 를 사용하면 클래스를 넣어줄 때 마다 `styles.[클래스]` 형식으로 할 필요없이 사전에 미리 styles를 받아서 사용하게 끔 설정해두고 `cx('class1','class2')` 형태로 사용할수 있습니다.

```js
// src/CSSModule.js
import React from 'react';
import classNames from 'classnames/bind';
import styles from './CSSModule.module.css';

// 미리 styles에서 클래스를 받아오도록 설정
const cx =  classNames.bind(styles);

const CSSModule = () => {
    return (
        <div className={cx('wrapper','inverted')}>
            안녕하세요, 저는 <span className="something">CSS Module!</span>
        </div>
    )
}
export default CSSModule;
```

classnames/bind를 사용하면 CSS Module을 사용할때 클래스를 여러개 설정하거나 또는 조건부로 설정을 할때 편하게 작성할 수 있습니다.

### Sass와 함께 사용하기

Sass를 사용할때도 파일이름 뒤에 .module.scss 을 입력해주면 CSS Module로 사용할 수 있습니다.

```css
/* CSSModule.module.scss */
/* 자동으로 고유해질 것이므로 흔히 사용되는 단어를 클래스 이름으로 마음대로 사용가능 */
.wrapper {
    background : black;
    padding : 1rem;
    color : white;
    font-size : 2rem;
    /* inverted 가 .wrapper와 함께 사용됐을 때만 적용 .wrapper.inverted */
    &.inverted {
        color : black;
        background : white;
        border : 1px solid black;
    }
}

/* 글로벌 CSS를 작성하고 싶다면 */
/* :global {} 로 감싸기 */
:global {
    .something {
        font-weight : 800;
        color : aqua;
    }
}
```

CSSModule.js에서는 상단에 .css 파일 대신 .scss 파일을 넣으면 됩니다.

```js
import styles from './CSSModule.module.scss';
```

### CSS Module 이 아닌 파일에서 CSS Module 사용하기

CSS Module 에서 글로벌 클래스를 정의할 때 :global 을 썻던것 처럼 CSS Module이 아닌 일반 .css/.scss파일에서도 :local을 통해서 CSS Module을 사용할수 있습니다.

```css
:local .wrapper {

}
:local {
    .wrapper {

    }
}
```

## styled-components

styled-components는 현존하는 리액트 CSS-in-JS 관련 라이브러리 중에서 가장 잘나가는 라이브러리입니다.

```
yarn add styled-components
```

하나의 자바스크립트 파일안에서 스타일까지 작성 할 수 있기때문에 .css/.scss 파일 같은 것을 만들지 않아도 됩니다.

```js
// src/StyledComponents.js
import React from 'react';
import styled , {css} from 'styled-components';

const Box = styled.div`
    /* props로 넣어준 값을 직접 전달할 수도 있습니다. */
    background : ${props => props.color || 'blue'};
    padding : 1rem;
    display : flex;
`;
const Button = styled.button`
    background : white;
    color : black;
    border-radius : 4px;
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    font-size: 1rem;
    font-weight: 600;
    /* & 문자를 사용하여 Sass 처럼 자기 자신 선택 가능 */
    &:hover {
        background : rgba(255,255,255, 0.9);
    }
    /* 다음 코드는 inverted 값이 true 일때 특정 스타일을 부여해줍니다. */
    ${props => 
        props.inverted &&
        css`
            background : none;
            border : 2px solid white;
            color : white;
            &:hover {
                background : white;
                color : black;
            }
        `
    };
    & + button {
        margin-left : 1rem;
    }
`
const styledComponent = () => (
    <Box color="black">
        <Button>안녕하세요</Button>
        <Button inverted={true}>테두리만</Button>
    </Box>
)
export default StyledComponent;
```

### Tagged Template Literal

styled-components에서는 스타일을 입력할때 Tagged Template literal 이라는 ES6문법을 사용합니다.

이 문법을 사용하는 이유는 ``를 사용할 때 내부에 자바스크립트 객체나 함수가 전달될 때 이를 따로 추출하기 위함입니다.

```js
`hello ${{foo:'bar'}} ${()=> 'world'}!`
// 결과 : "hello [object Object] () => 'world'!"
```

위의 코드는 [object Object] 문자열로 들어가서 형태를 잃어버리는데 함수를 만들어서 사용하면 템플릿 리터럴 안에 넣어준 값을 알수 있습니다.

```js
function tagged(...args){
    console.log(args);
}
tagged`hello ${{foo:'bar'}} ${()=> 'world'}!`;
```

### 스타일링된 엘리먼트 만들기

스타일링된 엘리먼트를 만들 땐 , 상단에서 styled를 불러오고 styled.태그명 을 사용하여 구현합니다.

```js
import styled from 'styled-components';

const MyComponent = styled.div`
    font-size : 2rem;
`
```

만약 보여줘야할 태그 형식이 유동적이거나 아니면 특정 컴포넌트에 스타일링을 해야하는 상황이라면 다음과 같은 형태로 구현할 수 있습니다.

```js
// 문자열로 styled 의 인자로 전달
const MyInput = styled('input')`
    background : gray;
`
// 컴포넌트 형식의 값을 넣어줌
const StyledLink = styled(Link)`
    color : blue;
`
```

### 스타일에서 props 조회하기

스타일링한 컴포넌트에 전달하는 props 값을 스타일쪽에서 그대로 사용하실 수도 있습니다.

```js
const Box = styled.div`
    /* props로 넣어준 값을 직접 전달해줄 수 있습니다. */
    background : ${props => props.color || 'blue'};
    padding : 1rem;
    display : flex;
`;
```

### props 에 따른 조건부 스타일링

일반 CSS 클래스를 사용했더라면 주로 클래스이름으로 조건부 스타일링을 해왔는데 styled-components에서는 그냥 props로 처리가능합니다.

```js
import styled, {css} from 'styled-components';

const Button = styled.button`
background: white;
  color: black;
  border-radius: 4px;
  padding: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  font-size: 1rem;
  font-weight: 600;

  /* & 문자를 사용하여 Sass 처럼 자기 자신 선택 가능 */
  &:hover {
    background: rgba(255, 255, 255, 0.9);
  }

  /* 다음 코드는 inverted 값이 true 일 때 특정 스타일을 부여해줍니다. */
  ${props =>
    props.inverted &&
    css`
      background: none;
      border: 2px solid white;
      color: white;
      &:hover {
        background: white;
        color: black;
      }
    `};
  & + button {
    margin-left: 1rem;
  }
`;
```

```js
// src/App.js
import React , {Component} from 'react';
import StyledComponent from './StyledComponent';

class App extends Component {
    render(){
        return <StyledComponent/>
    }
}
export default App;
```

### 반응형 디자인

```js
// src/StyledComponent.js
const Box = styled.div`
/* props 로 넣어준 값을 직접 전달해줄 수 있습니다. */
  background: ${props => props.color || 'blue'};
  padding: 1rem;
  display: flex;
  /* 기본적으로는 1024px 에 가운데 정렬을 하고
    가로 크기가 작아짐에 따라 사이즈를 줄이고
    768px 미만으로 되면 꽉 채웁니다 */
  width: 1024px;
  margin: 0 auto;
  @media (max-width: 1024px) {
    width: 768px;
  }
  @media (max-width: 768px) {
    width: 100%;
  }
`;
```

이런 작업을 함수화 하여 훨씬 더 쉽게 할 수 있습니다.

```js
// src/StyledComponent.js
import React from 'react';
import styled, {css} from 'styled-component';

const sizes = {
    desktop : 1024,
    tablet : 768
};

const media = Object.keys(sizes).reduce((acc,label) => {
    acc[label] = (...args) => css`
        @media (max-width: ${sizes[label] / 16}em){
            ${css(...args)}
        }
    `
    return acc;
},{})

const Box = styled.div`
    /* props 로 넣어준 값을 직접 전달해줄 수 있습니다. */
    background : ${props => props.color || 'blue'};
    padding : 1rem;
    display : flex;
    width : 1024px;
    margin : 0 auto;
    ${media.desktop`width: 768px`};
    ${medis.tablet`width: 768px`};
`
```

media를 StyledComponent.js에서 만들었지만 다른 파일로 분리해서 사용한다면 훨씬 편합니다.

# 출처 사이트

[다양한 방식의 리액트 컴포넌트 스타일링 방식 CSS, Sass, CSS Module, styled-components](https://velog.io/@velopert/react-component-styling)