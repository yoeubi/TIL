# 4.1 클래스 이론

클래스와 상속은 특정 형태의 코드와 구조를 형성하며 실생활 영역의 문제를 소프트웨어로 모델링 하기 위한 방법이다.

객체 지향 또는 클래스 지향 프로그래밍에서 데이터는 자신을 기반으로 하는 실행되는 작동과 연관되므로 데이터와 작동을 함께 잘 감싸는 것이 올바른 설계라고 강조한다.

정규 컴퓨터 과학에서는 이를 자료 구조란 말로 표현하기도 한다.

예를 들어, 일련의 문자들은 보통 문자열이라고 하는 단어 또는 어구를 나타낸다.

여기서 데이터가 바로 문자들인데 보통 데이터 자체보다는 이 데이터로 원하는 작업을 하는 것이 관심사이므로 데이터에 적용 가능한 작동 (길이를 세거나 문자열 이어 붙이기, 검색 등)들을 모두 String 클래스의 메서드로 설계한다.

그래서 어떤 문자열이 주어지더라도 데이터와 작동이 잘 포장된 String 클래스의 인스턴스로 나타낼 수 있다.

클래스는 특정 자료 구조를 분류하는 용도로 쓴다. 즉, 일반적인 기준 정의에서 세부적이고 구체적인 변형으로서의 자료 구조를 도출하는 것이다.

흔히 인용하는 예로, 차(car)는 일반적인 탈것 (vehicle) 클래스의 구현체 중 하나다.

소프트웨어에서는 이런 관계를 Vehicle 클래스 , Car 클래스로 각각 모델링 한다. Vehicle은 추진 기관 같은 것과 사람을 운송하는 기능, 즉 작동을 함께 정의한다.

따라서 Vehicle의 범주에는 거의 모든 유형의 탈것 (비행기, 기차, 자동차 등)이 포함된다.

다른 탈것마다 사람을 운송하는 기능을 매번 재정의해야 한다면 올바른 소프트웨어 설계가 아닐 것이다. 

그래서 Vehicle 한 곳에만 정의해두고 Car는 Vehicle에 있는 기반 정의를 상속(확장) 받아 정의한다.

Car가 일반적인 Vehicle의 정의를 세분화 한 셈이다.

Vehicle과 Car에서 메서드를 통해 집합적으로 작동을 정의한다면 인스턴스 데이터는 차량별 고유 시리얼 넘버 같은 것을 생각할 수 있다.

이런 식으로 클래스, 상속, 인스턴스화가 이루어 진다.

다형성은 또 다른 클래스의 핵심 개념으로 부모 클래스에 뭉뚱그려 정의된 작동을 자식 클래스에서 좀 더 구체화하여 오버라이드(재정의) 하는 것을 뜻한다.

사실 오버라이드된 작동에서 기반 작동을 참조할 수 있는 건 이런 상대적 다형성 덕분이다.

클래시의 이론에서는 어떤 작동이 담긴 메서드의 이름을 부모와 자식 클래스 모두 똑같이 공유하여 자식 클래스 메서드가 부모 클래스 메서드를 (다르게) 오버라이드하라고 권장한다.

그러나 자바스크립트에서 이렇게 하면 예기치 않은 결과를 초래하기도 하고 불안정한 코드가 만들어진다.

# 4.1.1 클래스 디자인 패턴

순회자(iterator), 관찰자(observer), 팩토리(factory), 싱글턴(singleton) 등의 유명한 객체 지향 디자인 패턴들이 위낙 자주 인용되는 탓에 클래스 역시 디자인 패턴의 일종이란 생각은 한 번도 해본 적이 없을 것이다.

그래서 마치 객체 지향을 모든 코드의 근본이나 되는 양, 객체 지향 클래스가 상위 수준의 디자인 패턴을 구현할 때 이를 지탱하는 하위 수준의 체계라고 당연시하는 것 같다.

절차적 프로그래밍이라는 말을 들어봤을 것이다. 이는 상위 수준의 추상화 없이 다른 함수를 호출하는 프로시저(함수)로만 코드를 구성하는 프로그래밍 기법이다.

절차적 프로그래밍 스타일로 작성된 스파게티 코드를 잘 정돈된 체계적인 코드로 전환하는데 클래스가 바로 최적의 솔루션이라는 가르침을 받은 사람도 있을 것이다.

함수형 프로그래밍을 경험해 봤다면 클래스가 단지 많이 쓴느 서너 개 디자인 패턴 중 하나라는 사실 또한 잘 알고 있을 것이다.

하지만 대부분 독자에게 클래스가 과연 모든 코드의 근본적인 기초일까 아니면 코드를 선택적으로 추상화한 것일까란 의문을 품는 자체가 어색하게 느껴질 것이다.

# 4.1.2 자바스크립트 클래스

꽤 오래전부터 클래스와 비슷하게 생긴 (new 나 instanceof 등의) 구문 요소도 갖추고 있고 최근 ES6부터는 아예 class라는 키워드가 명세에 정식으로 추가됐다.

그럼 정말 자바스크립트는 클래스가 있는 것일까? 단도직입적으로 말해서 아니다.

클래스는 디자인 패턴이므로 적잖이 공들이면 고전적인 클래스 기능과 얼추 비슷하게 구현할 수 있는 건 사실이다.

그간 자바스크립트는 적어도 외관상으로는 클래스처럼 생긴 구문을 제공하고 클래스 디자인 패턴을 실현하려는 욕구를 충족시키고자 많은 변신을 거듭해왔다.

그러나 클래스처럼 보이는 구문일 뿐이며 개발자들이 클래스 디자인 패턴으로 코딩할 수 있도록 자바스크립트 체계를 억지로 고친 것에 불과하다.

장막을 걷고 안을 들여다보면 전혀 다른 방식으로 작동한다. 간편 구문이나 갖가지 자바스크립트 클래스 라이브러리는 불편한 진실을 감추기 위해 먼 길을 돌아온 결과물이며 자바스크립트 클래스가 여타 언어의 클래스와 달리 그저 모조품에 지나지 않는다는 진실을 곧 보게 될 것이다.

어쨌거나 결론은, 클래스는 소프트웨어 디자인 패턴 중 한 가지 옵션일 뿐이나 자바스크립트에서 클래스를 쓸지 말지는 결국 자신이 결정할 문제라는 것이다.

